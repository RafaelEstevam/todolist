<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <title>To do APP</title>
        <link rel="stylesheet" href="assets/css/bootstrap.css" />
        <link rel="stylesheet" href="assets/css/main.css" />
        <link rel="stylesheet" href="assets/font-awesome-4.7.0/css/font-awesome.css" />
    </head>
    <body>
        <div class="interface">
            <!-- <div class="interface-bar-tools">
                <button class="main-btn main-circle main-bg-dark text-white">0</button>
                <button class="main-btn main-circle main-bg-primary text-white">0</button>
            </div> -->
            <div class="interface-wrapper">
                <div class="interface-wrapper-tools">
                    <div class="main d-flex align-itens-center justify-content-between">
                        <div class="interface-wrapper-tools-buttons">
                            <button class="main-circle main-btn main-bg-dark text-white mr-3 font-weight-bold" data-toggle="modal" data-target="#help">?</button>
                        </div>
                        <div class="interface-wrapper-tools-buttons">
                            <form class="mb-0 mr-3" id="formSearchTask">
                                <div class="input-group">
                                    <input id="searchIdInput" type="text" class="form-control search-form-input border-0 main-bg-dark text-white" placeholder="Buscar tarefa por ID">
                                    <div class="input-group-append">
                                      <button type="submit" class="btn btn-outline-secondary main-circle main-btn main-bg-primary text-white" type="button" id="button-addon2"><i class="fa fa-search"></i></button>
                                    </div>
                                  </div>
                            </form>
                        </div>
                        <div class="interface-wrapper-tools-buttons">
                            <button class="main-circle main-btn main-bg-dark text-white mr-3" title="Importar" id="import" data-toggle="modal" data-target="#importTasks"><i class="fa fa-upload"></i></button>
                            <a href="http://127.0.0.1:5000/csv/export" target="_blank"  title="Exportar" class="main-circle main-btn main-bg-danger text-white"><i class="fa fa-download"></i></a>
                        </div>
                    </div>
                </div>
                <div class="interface-wrapper-dashboard">
                    <div class="container-fluid interface-wrapper-scroll">
                        <div class="main py-3 d-flex justify-content-between align-itens-center">
                            <h1 class="text-white font-weight-light">Sprint <span class="font-weight-bold main-text-primary">Backlog</span></h1>
                            <button id="addTaskButton" class="main-circle main-btn main-bg-primary text-white" type="button"><i class="fa fa-check mr-3"></i> Add Tasks</button>
                        </div>
                        <div id="historyWrapper" class="main interface-wrapper-history"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="addTask" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content main-bg-dark">
                    <form class="container-fluid mb-0" id="formTask">
                        <div class="row">
                            <div class="col-12 text-center text-white py-3">
                                <h2 id="modalTitle" class="font-weight-light text-white">Dados da tarefa</h2>
                            </div>
                            <div class="col-12 d-flex justify-content-between">
                                <p class="text-white font-weight-bold main-task-total-score main-bg-primary">Pontuação total: <span id="totalPoints"></span></p>
                                <p class="text-white font-weight-bold main-task-total-score main-bg-primary">Pontuação: <span id="scoreTask"></span></p>
                            </div>
                            <div class="col-12 text-white">
                                <input type="hidden" placeholder="ID da tarefa (preenchido automaticamente)" id="idInput" readonly="readonly" name="id" class="form-control main-bg-gray text-white main-input mb-3">
                            </div>
                            <div class="col-12 text-white">
                                <label>Nome da tarefa: </label>
                                <input required type="text" id="nameInput" placeholder="Nome da tarefa" name="name" class="form-control main-bg-gray text-white main-input mb-3">
                            </div>
                            <div class="col-12 text-white">
                                <div class="row">
                                    <div class="col-md-6">
                                        <label>Pontuação da tarefa: </label>
                                        <input required type="number" id="scoreInput" placeholder="Pontuação" name="score" class="form-control main-bg-gray text-white main-input mb-3">
                                    </div>
                                    <div class="col-md-6">
                                        <label>Status da tarefa: </label>
                                        <select required name="status" id="statusSelect" class="form-control main-bg-gray text-white main-input mb-3">
                                            <option value="">Selecione um status</option>
                                            <!-- <option value="to-do">Para fazer</option>
                                            <option value="done">Concluida</option>
                                            <option value="in-progress">Em progresso</option>
                                            <option value="blocked">Bloqueada</option> -->
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 text-white">
                                <label>Selecione uma tarefa pai </label>
                                <select required class="form-control main-bg-gray text-white main-input mb-3" id="parentTaskSelect" name="parentTaskId">
                                    <option data-index="0" value="0">Sem tarefa pai (Tarefa principal)</option>
                                </select>
                            </div>
                            <div class="col-md-12 mb-3">
                                <input value="1" type="hidden" readonly="readonly" name="index" id="indexParentInput" class="form-control main-bg-gray text-white main-input mb-3">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12 main-bg-deep py-3 d-flex justify-content-between align-itens-center">
                                <div>
                                    <button type="button" id="deleteTask" class="main-btn main-text-danger bg-transparent mr-3 font-weight-bold" data-dismiss="modal">Apagar tarefa</button>
                                </div>
                                <div class="d-flex justify-content-end align-itens-center">
                                    <button type="button" class="main-btn main-rounded text-white main-bg-danger mr-3" data-dismiss="modal">Fechar</button>
                                    <button type="submit" class="main-btn main-rounded text-white main-bg-success" id="taskSubmit">Salvar tarefa</button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <div class="modal fade" id="importTasks" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content main-bg-dark">
                    <form class="container-fluid mb-0" id="formImportTask">
                        <div class="row">
                            <div class="col-12 text-center text-white py-3">
                                <h2 id="modalTitle" class="font-weight-light text-white">Importar tarefas</h2>
                            </div>
                            <div class="col-12 text-white">
                                <input type="file" id="importTasksInput" name="id" class="form-control main-bg-gray text-white main-input mb-3">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12 main-bg-deep py-3 d-flex justify-content-between align-itens-center">
                                <button type="button" class="main-btn main-rounded text-white main-bg-danger mr-3" data-dismiss="modal">Fechar</button>
                                <button type="submit" class="main-btn main-rounded text-white main-bg-success" id="taskSubmit">Importar</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <div class="modal fade" id="notFoundTaks" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content main-bg-dark">
                    <form class="container-fluid mb-0" id="formImportTask">
                        <div class="row">
                            <div class="col-12 text-center text-white py-3">
                                <h2 id="modalTitle" class="font-weight-light text-white">Tarefa não encontrada</h2>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12 main-bg-deep py-3 d-flex justify-content-end align-itens-center">
                                <button type="button" class="main-btn main-rounded text-white main-bg-danger mr-3" data-dismiss="modal">Fechar</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <div class="modal fade" id="help" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content main-bg-dark">
                    <form class="container-fluid mb-0" id="formImportTask">
                        <div class="row">
                            <div class="col-12 text-white py-3">
                                <h2 id="modalTitle" class="font-weight-light text-center">Ajuda</h2>
                                <h4 class="font-weight-light text-center">Status das tarefas </h4>
                                <div class="d-flex justify-content-between">
                                    <small class="main-task-status to-do"></small>
                                    <small class="main-task-status done"></small>
                                    <small class="main-task-status in-progress"></small>
                                    <small class="main-task-status blocked"></small>
                                </div>
                                <p>
                                    <small class="main-task-status false p-0 mr-2"></small>
                                    Esse status serve para indicar quando uma tarefa "pai" foi dada como concluida, mas que depois de concluida, recebeu uma
                                    nova tarefa com status diferente de concluida.
                                </p>

                                <h4 class="font-weight-light text-center">Pontuação das tarefas </h4>
                                <p>
                                    Se uma tarefa "pai" possui subtarefas, é feito um cálculo para determinar sua pontuação total de acordo com a soma de todas
                                    as subtarefas com a sua própria pontuação.  
                                </p>
                                
                            </div>

                        </div>
                        <div class="row">
                            <div class="col-12 main-bg-deep py-3 d-flex justify-content-end align-itens-center">
                                <button type="button" class="main-btn main-rounded text-white main-bg-danger mr-3" data-dismiss="modal">Fechar</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        
    </body>

    <script src="./assets/js/jquery.js"></script>
    <script src="./assets/js/popper.min.js"></script>
    <script src="./assets/js/bootstrap.js"></script>
    <script src="./main.js" type="module"></script>

</html>